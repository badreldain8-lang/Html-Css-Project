<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Local Brands Store</title>
    <style>
        body { font-family: Arial; background:#f5f5f5; margin:0; }
        header { background:#111; color:#fff; padding:15px; position:relative; }
        .cart-icon { position:absolute; top:15px; right:20px; cursor:pointer; }
        .cart-icon span { background:red; color:white; border-radius:50%; padding:2px 7px; font-size:12px; }
        .product { background:#fff; margin:15px; padding:15px; text-align:center; display:inline-block; width:200px; }
        .product img { width:150px; }
        button { padding:8px 12px; cursor:pointer; margin-top:5px; }
    </style>
</head>
<body>

<header>
    <h2>Local Brands Store</h2>
    <div class="cart-icon" onclick="location.href='cart.html'">
        ðŸ›’ <span id="cartCount">0</span>
    </div>
</header>

<div class="product">
    <img src="assets/images/tshirt.jpg" alt="T-Shirt">
    <h3>T-Shirt</h3>
    <p>300 Ø¬Ù†ÙŠÙ‡</p>
    <button onclick="addToCart('T-Shirt',300,'assets/images/tshirt.jpg')">Add to cart</button>
</div>

<div class="product">
    <img src="assets/images/hoodie.jpg" alt="Hoodie">
    <h3>Hoodie</h3>
    <p>700 Ø¬Ù†ÙŠÙ‡</p>
    <button onclick="addToCart('Hoodie',700,'assets/images/hoodie.jpg')">Add to cart</button>
</div>

<script>
    function updateCount() {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const totalItems = cart.reduce((sum, item) => sum + (item.qty || 0), 0);
        const el = document.getElementById("cartCount");
        if(el) el.innerText = totalItems;
    }

    function addToCart(name, price, img) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        const index = cart.findIndex(p => p.name === name);
        if(index !== -1) {
            cart[index].qty++;
        } else {
            cart.push({name, price, img, qty:1});
        }
        localStorage.setItem("cart", JSON.stringify(cart));
        updateCount();
    }

    // This fixes the "Back Button" problem
    window.onpageshow = function(event) {
        updateCount();
    };

    // Run immediately
    updateCount();
</script>
</body>
</html>

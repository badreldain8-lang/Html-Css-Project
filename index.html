<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luxury Fashion Store</title>
    <style>
        :root { --primary: #000; --bg: #f9f9f9; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; padding: 20px; }
        .header { display: flex; justify-content: space-between; align-items: center; max-width: 1100px; margin: 0 auto 30px; }
        .product-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(240px, 1fr)); gap: 25px; max-width: 1100px; margin: 0 auto; }
        .product-card { background: #fff; border-radius: 15px; padding: 15px; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.05); border: 1px solid #eee; transition: 0.3s; }
        .product-card:hover { transform: translateY(-5px); }
        .product-card img { width: 100%; height: 250px; object-fit: cover; border-radius: 10px; }
        .brand { display: block; font-size: 0.7rem; color: #888; text-transform: uppercase; letter-spacing: 1px; margin: 10px 0 5px; }
        .price { display: block; font-weight: bold; font-size: 1.2rem; color: #333; margin-bottom: 10px; }
        .size-selector { width: 100%; padding: 10px; margin-bottom: 10px; border-radius: 8px; border: 1px solid #ddd; }
        .add-btn { background: var(--primary); color: #fff; border: none; padding: 12px; border-radius: 8px; cursor: pointer; width: 100%; font-weight: bold; }
        .cart-icon { background: #ff3b30; color: white; border-radius: 50px; padding: 10px 20px; font-weight: bold; cursor: pointer; text-decoration: none; }
    </style>
</head>
<body>

<div class="header">
    <h1>New Collection</h1>
    <a href="cart.html" class="cart-icon">ðŸ›’ Cart (<span id="cartCount">0</span>)</a>
</div>

<div class="product-grid">
    <div class="product-card">
        <img src="https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?q=80&w=500" alt="T-Shirt">
        <span class="brand">Urban Style</span>
        <strong>Premium White Tee</strong>
        <span class="price">450 EGP</span>
        <select class="size-selector" id="size-1">
            <option value="">Select Size</option>
            <option value="S">S</option><option value="M">M</option><option value="L">L</option><option value="XL">XL</option>
        </select>
        <button class="add-btn" onclick="addToCart({id:1, name:'Premium White Tee', price:450, img:'https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?q=80&w=500'}, 'size-1')">Add to Cart</button>
    </div>

    <div class="product-card">
        <img src="https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=500" alt="Sneakers">
        <span class="brand">SportX</span>
        <strong>Speed Runners Red</strong>
        <span class="price">1200 EGP</span>
        <select class="size-selector" id="size-2">
            <option value="">Select Size</option>
            <option value="41">41</option><option value="42">42</option><option value="43">43</option><option value="44">44</option>
        </select>
        <button class="add-btn" onclick="addToCart({id:2, name:'Speed Runners Red', price:1200, img:'https://images.unsplash.com/photo-1542291026-7eec264c27ff?q=80&w=500'}, 'size-2')">Add to Cart</button>
    </div>
</div>

<script>
function updateCartIcon(){
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    const count = cart.reduce((sum,item)=>sum + item.qty,0);
    document.getElementById("cartCount").innerText = count;
}

function addToCart(product, sizeId){
    const size = document.getElementById(sizeId).value;
    if(!size) return alert("Please select a size first!");

    let cart = JSON.parse(localStorage.getItem("cart")) || [];
    const existing = cart.find(p => p.id === product.id && p.size === size);

    if(existing) { existing.qty++; } 
    else { cart.push({...product, size, qty:1}); }
    
    localStorage.setItem("cart", JSON.stringify(cart));
    updateCartIcon();
    alert("Added to cart!");
}

window.addEventListener('pageshow', updateCartIcon);
updateCartIcon();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Ù…ØªØ¬Ø±ÙŠ</title>
    <style>
        body { font-family: Arial; background:#f5f5f5; margin:0; padding:20px; direction: rtl; }
        .product { background:#fff; padding:15px; margin-bottom:10px; border-radius:8px; display:flex; justify-content:space-between; align-items:center; }
        .cart-icon { position:fixed; top:10px; left:10px; background:red; color:white; border-radius:50%; padding:8px 12px; font-weight:bold; cursor:pointer; }
    </style>
</head>
<body>

<div class="cart-icon" onclick="location.href='cart.html'">
    ğŸ›’ <span id="cartCount">0</span>
</div>

<h1>Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h1>
<div id="product-list">
    <div class="product">
        <span>Ø³Ø§Ø¹Ø© Ø°ÙƒÙŠØ© - 500 Ø¬Ù†ÙŠÙ‡</span>
        <button onclick="addToCart({id:1, name:'Ø³Ø§Ø¹Ø© Ø°ÙƒÙŠØ©', price:500, img:'https://via.placeholder.com/50'})">Ø¥Ø¶Ø§ÙØ© Ù„Ù„Ø³Ù„Ø©</button>
    </div>
</div>

<script>
function updateCartIcon(){
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    const count = cart.reduce((sum,item)=>sum + item.qty,0);
    document.getElementById("cartCount").innerText = count;
}

function addToCart(product){
    const cart = JSON.parse(localStorage.getItem("cart")) || [];
    const existing = cart.find(p => p.id === product.id);
    if(existing) { existing.qty++; } else { cart.push({...product, qty:1}); }
    localStorage.setItem("cart", JSON.stringify(cart));
    updateCartIcon();
    alert("ØªÙ…Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ©!");
}

// ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø¹Ø¯Ø§Ø¯ Ø¹Ù†Ø¯ Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØµÙØ­Ø©
window.addEventListener('pageshow', updateCartIcon);
updateCartIcon();
</script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Secure Payment | Modern Store</title>
    <style>
        :root { --accent: #0071e3; --text: #1d1d1f; --grey: #86868b; --success: #28a745; }
        body { font-family: -apple-system, sans-serif; background: #f5f5f7; display: flex; align-items: center; justify-content: center; min-height: 100vh; margin:0; color: var(--text); }
        
        .card { background: white; width: 90%; max-width: 400px; padding: 30px; border-radius: 28px; box-shadow: 0 20px 50px rgba(0,0,0,0.06); }
        
        .header-title { text-align: center; font-weight: 700; font-size: 1.4rem; margin-bottom: 5px; }
        .price-hero { text-align: center; font-size: 2.5rem; font-weight: 800; margin: 15px 0; color: var(--accent); letter-spacing: -1px; }
        
        .selector-label { font-size: 0.9rem; font-weight: 600; color: var(--grey); margin-bottom: 12px; display: block; text-align: center; }
        
        .option { display: block; background: #f5f5f7; padding: 18px; border-radius: 16px; margin-bottom: 12px; cursor: pointer; border: 2.5px solid transparent; transition: 0.2s; position: relative; }
        .option input { position: absolute; opacity: 0; }
        .option-content { display: flex; justify-content: space-between; align-items: center; font-weight: 700; }
        
        /* Active State */
        .option:has(input:checked) { border-color: var(--accent); background: #fff; box-shadow: 0 10px 20px rgba(0,113,227,0.1); }
        .option:has(input:checked) .option-content { color: var(--accent); }

        /* Payment Methods Box */
        .methods-container { background: #1d1d1f; color: #fff; padding: 25px; border-radius: 20px; margin-top: 25px; position: relative; overflow: hidden; }
        .methods-container::after { content: "INSTAPAY"; position: absolute; right: -10px; bottom: -5px; font-size: 3rem; font-weight: 900; opacity: 0.05; font-style: italic; }
        
        .method-label { font-size: 0.75rem; text-transform: uppercase; letter-spacing: 1px; color: #aaa; font-weight: 600; }
        .phone-num { font-size: 1.4rem; font-weight: 800; display: block; margin: 8px 0; letter-spacing: 1px; }
        
        .copy-btn { background: var(--accent); color: white; border: none; padding: 8px 16px; border-radius: 8px; font-weight: bold; font-size: 0.8rem; cursor: pointer; transition: 0.2s; }
        .copy-btn:active { transform: scale(0.95); }

        .warning { text-align: center; font-size: 0.75rem; color: #d32f2f; font-weight: 600; margin-top: 20px; }
        .confirm-btn { width: 100%; padding: 18px; background: var(--success); color: white; border: none; border-radius: 16px; font-weight: 800; margin-top: 15px; cursor: pointer; font-size: 1.05rem; box-shadow: 0 8px 20px rgba(40,167,69,0.2); transition: 0.3s; }
        .confirm-btn:hover { filter: brightness(1.1); transform: translateY(-2px); }
    </style>
</head>
<body>

<div class="card">
    <div class="header-title">Final Step</div>
    <div class="price-hero" id="totalDisplay">0 EGP</div>
    
    <span class="selector-label">CHOOSE DEPOSIT AMOUNT</span>
    
    <label class="option">
        <input type="radio" name="payType" value="Full Amount" checked onchange="updateUI()">
        <div class="option-content">
            <span>Full Payment</span>
            <span id="fAmt">0</span>
        </div>
    </label>

    <label class="option">
        <input type="radio" name="payType" value="50% Deposit" onchange="updateUI()">
        <div class="option-content">
            <span>50% Deposit</span>
            <span id="hAmt">0</span>
        </div>
    </label>

    <div class="methods-container">
        <div class="method-label">Vodafone Cash or InstaPay âš¡</div>
        <div class="phone-num" id="payNumber">01015653338</div>
        <button class="copy-btn" onclick="copyNum()">Copy Number</button>
    </div>

    <div class="warning">ðŸ“¸ MUST SEND SCREENSHOT AFTER TRANSFER</div>
    <button class="confirm-btn" onclick="submitPayment()">I HAVE TRANSFERRED âœ…</button>
</div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const total = parseInt(urlParams.get('total')) || 0;
    const orderID = urlParams.get('order') || "N/A";

    // Initialize UI
    document.getElementById("totalDisplay").innerText = total + " EGP";
    document.getElementById("fAmt").innerText = total + " EGP";
    document.getElementById("hAmt").innerText = (total / 2) + " EGP";

    function copyNum() {
        const num = document.getElementById("payNumber").innerText;
        navigator.clipboard.writeText(num).then(() => {
            const btn = document.querySelector('.copy-btn');
            btn.innerText = "Copied! âœ“";
            btn.style.background = "#28a745";
            setTimeout(() => {
                btn.innerText = "Copy Number";
                btn.style.background = "#0071e3";
            }, 2000);
        });
    }

    function submitPayment() {
        const choice = document.querySelector('input[name="payType"]:checked').value;
        // Save choice for WhatsApp
        localStorage.setItem("paymentChoice", choice);
        // Redirect to confirmation
        window.location.href = `confirmation.html?order=${orderID}`;
    }
</script>

</body>
</html>

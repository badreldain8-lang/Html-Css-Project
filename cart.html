<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <title>Ø³Ù„Ø© Ø§Ù„Ø´Ø±Ø§Ø¡</title>
    <style>
        body { font-family: Arial; background:#f5f5f5; margin:0; padding:20px; }
        .item { display:flex; justify-content:space-between; background:#fff; margin-bottom:10px; padding:10px; border-radius:5px; align-items:center; }
        .item img { width:50px; height:50px; margin-left:10px; }
        .controls button { padding:5px 10px; cursor:pointer; }
        .cart-icon { position:fixed; top:10px; left:10px; background:red; color:white; border-radius:50%; padding:5px 10px; }
    </style>
</head>
<body>

<h1>Ø³Ù„Ø© Ø§Ù„Ø´Ø±Ø§Ø¡</h1>

<select id="governorate" onchange="render()">
    <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø­Ø§ÙØ¸Ø©</option>
    <option value="50">Ø§Ù„Ù‚Ø§Ù‡Ø±Ø© (50 Ø¬)</option>
    <option value="60">Ø§Ù„Ø¬ÙŠØ²Ø© (60 Ø¬)</option>
    <option value="70">Ø§Ù„Ø¥Ø³ÙƒÙ†Ø¯Ø±ÙŠØ© (70 Ø¬)</option>
</select>

<div id="cartList"></div>

<p>Ø§Ù„Ø´Ø­Ù†: <span id="shipPrice">0</span> Ø¬Ù†ÙŠÙ‡</p>
<p>Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ: <span id="totalPrice">0</span> Ø¬Ù†ÙŠÙ‡</p>

<button onclick="location.href='index.html'">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„ØªØ³ÙˆÙ‚</button>

<div class="cart-icon">ğŸ›’ <span id="cartCount">0</span></div>

<script>
    function render() {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const list = document.getElementById("cartList");
        let subtotal = 0;
        let totalQty = 0;
        
        list.innerHTML = "";
        
        cart.forEach((item, index) => {
            subtotal += (item.price * item.qty);
            totalQty += item.qty;
            
            const div = document.createElement("div");
            div.className = "item";
            div.innerHTML = `
                <div>
                    <img src="${item.img}">
                    <span>${item.name} (${item.price} Ø¬)</span>
                </div>
                <div class="controls">
                    <button onclick="changeQty(${index}, -1)">-</button>
                    <span>${item.qty}</span>
                    <button onclick="changeQty(${index}, 1)">+</button>
                    <button onclick="remove(${index})">âŒ</button>
                </div>
            `;
            list.appendChild(div);
        });

        const ship = parseInt(document.getElementById("governorate").value) || 0;
        document.getElementById("shipPrice").innerText = ship;
        document.getElementById("totalPrice").innerText = subtotal + ship;
        document.getElementById("cartCount").innerText = totalQty;
    }

    function changeQty(index, amt) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart[index].qty += amt;
        if(cart[index].qty <= 0) cart.splice(index, 1);
        localStorage.setItem("cart", JSON.stringify(cart));
        render();
    }

    function remove(index) {
        let cart = JSON.parse(localStorage.getItem("cart")) || [];
        cart.splice(index, 1);
        localStorage.setItem("cart", JSON.stringify(cart));
        render();
    }

    window.onpageshow = render;
    render();
</script>
</body>
</html>



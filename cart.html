<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Bag | Velocity Streetwear</title>
    <link rel="icon" type="image/png" href="https://i.ibb.co/Lhb8Z0v/velocity-logo.png">
    <style>
        :root { --accent: #0071e3; --text: #1d1d1f; --grey: #86868b; }
        body { font-family: -apple-system, sans-serif; background: #f5f5f7; padding: 20px; }
        .container { max-width: 600px; margin: auto; background: white; padding: 30px; border-radius: 25px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); }
        .item { display: flex; align-items: center; gap: 15px; padding: 20px 0; border-bottom: 1px solid #eee; }
        .item img { width: 80px; height: 80px; border-radius: 12px; object-fit: cover; }
        .item-info { flex-grow: 1; }
        .unit-price { color: #0071e3; font-size: 0.85rem; font-weight: 600; margin-top: 5px; }
        .qty-box { display: flex; align-items: center; background: #f5f5f7; border-radius: 8px; padding: 4px; width: fit-content; margin-top: 8px; }
        .qty-box button { border: none; background: white; width: 25px; height: 25px; border-radius: 4px; cursor: pointer; font-weight: 800; }
        .summary { margin-top: 30px; background: #fbfbfd; padding: 20px; border-radius: 20px; }
        .checkout-btn { width: 100%; padding: 20px; background: #000; color: white; border: none; border-radius: 15px; font-weight: bold; font-size: 1rem; cursor: pointer; margin-top: 15px; }
    </style>
</head>
<body>
<div class="container">
    <h2 style="font-weight: 800; letter-spacing: -1px;">Shopping Bag</h2>
    <div id="list"></div>
    <div class="summary">
        <select id="city" onchange="render()" style="width:100%; padding:14px; margin-bottom:20px; border-radius:12px; border:1px solid #ddd; outline:none;">
            <option value="0">Select Delivery City</option>
            <option value="50">Cairo (50 EGP)</option>
            <option value="65">Alexandria (65 EGP)</option>
        </select>
        <div style="display:flex; justify-content:space-between; font-weight:800; font-size:1.3rem;">
            <span>Total</span> <span id="grand">0 EGP</span>
        </div>
        <button class="checkout-btn" onclick="next()">Proceed to Shipping</button>
    </div>
</div>
<script>
    function render() {
        const cart = JSON.parse(localStorage.getItem("cart")) || [];
        const box = document.getElementById("list");
        let sub = 0; box.innerHTML = "";
        cart.forEach((item, i) => {
            const rowTotal = item.price * item.qty;
            sub += rowTotal;
            box.innerHTML += `
                <div class="item">
                    <img src="${item.img}">
                    <div class="item-info">
                        <b>${item.name}</b><br><small>Size: ${item.size}</small>
                        <div class="unit-price">${item.price} EGP / item</div>
                        <div class="qty-box">
                            <button onclick="upd(${i},-1)">-</button>
                            <span style="padding:0 12px">${item.qty}</span>
                            <button onclick="upd(${i},1)">+</button>
                        </div>
                    </div>
                    <div style="text-align:right">
                        <b style="font-size:1.1rem">${rowTotal} EGP</b><br>
                        <button onclick="upd(${i},-99)" style="border:none; background:none; color:red; cursor:pointer; font-size:0.75rem; margin-top:10px;">Remove</button>
                    </div>
                </div>`;
        });
        const ship = parseInt(document.getElementById("city").value);
        document.getElementById("grand").innerText = (sub + ship) + " EGP";
        localStorage.setItem("tempTotal", sub + ship);
    }
    function upd(i, d) {
        let cart = JSON.parse(localStorage.getItem("cart"));
        cart[i].qty += d;
        if(cart[i].qty < 1) cart.splice(i,1);
        localStorage.setItem("cart", JSON.stringify(cart));
        render();
    }
    function next() {
        const city = document.getElementById("city");
        if(city.value == "0") return alert("Please select a city");
        localStorage.setItem("selectedGovernorate", city.options[city.selectedIndex].text);
        window.location.href = "checkout.html";
    }
    render();
</script>
</body>
</html>

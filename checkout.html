<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Checkout</title>
</head>
<body>

<h2>إكمال بيانات العميل</h2>

<form id="checkoutForm">
  <label>الاسم:</label><br>
  <input type="text" id="customerName"><br>
  <label>العنوان:</label><br>
  <input type="text" id="customerAddress"><br>
  <label>رقم الهاتف:</label><br>
  <input type="text" id="customerPhone"><br>
  <label>المحافظة:</label><br>
  <input type="text" id="customerGovernorate" readonly><br><br>
  <button type="button" onclick="confirmOrder()">تأكيد الطلب</button>
</form>

<script>
const cart = JSON.parse(localStorage.getItem("cart")) || [];
const gov = localStorage.getItem("selectedGovernorate");
document.getElementById("customerGovernorate").value = gov;

function confirmOrder(){
  const name = document.getElementById("customerName").value;
  const address = document.getElementById("customerAddress").value;
  const phone = document.getElementById("customerPhone").value;

  if(!name || !address || !phone){
    alert("اكمل كل البيانات");
    return;
  }

  let orders = JSON.parse(localStorage.getItem("orders")) || [];
  const orderNumber = Math.floor(Math.random()*1000000);

  orders.push({
    orderNumber,
    cart,
    customer: {name,address,phone,gov}
  });

  localStorage.setItem("orders", JSON.stringify(orders));
  localStorage.removeItem("cart");
  localStorage.removeItem("selectedGovernorate");

  window.location.href="payment.html?order="+orderNumber;
}
</script>

</body>
</html>
